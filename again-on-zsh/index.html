<!doctype html><html lang=en-us>
<head>
<title>Again on zsh // A fractal spectrum of tales</title>
<meta charset=utf-8>
<meta name=generator content="Hugo 0.92.0">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="Marcello Seri">
<meta name=description content="Free thoughts of a geeky mathematician">
<meta http-equiv=permissions-policy content="interest-cohort=()">
<link rel=stylesheet href=https://www.mseri.me/css/main.min.4e2016cf62779480fbe7ba44c261abc7b3a9744838af7268702179daa31e0716.css>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Again on zsh">
<meta name=twitter:description content="I already wrote about the great pleasure of moving to zsh in a previous post, but I feel that I should update you on the progresses.
From the last time I moved from Oh-My-Zsh to Prezto, a different dotfiles framework. I&rsquo;ve found it much lighter and faster than oh-my-zsh, despite not having the same amount of plugins and themes.
In fact, as far as I understood, prezto was born as a fork of oh-my-zsh and was later completely rewritten to be more zshish and better optimised.">
<meta property="og:title" content="Again on zsh">
<meta property="og:description" content="I already wrote about the great pleasure of moving to zsh in a previous post, but I feel that I should update you on the progresses.
From the last time I moved from Oh-My-Zsh to Prezto, a different dotfiles framework. I&rsquo;ve found it much lighter and faster than oh-my-zsh, despite not having the same amount of plugins and themes.
In fact, as far as I understood, prezto was born as a fork of oh-my-zsh and was later completely rewritten to be more zshish and better optimised.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.mseri.me/again-on-zsh/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2013-12-18T18:45:04+00:00">
<meta property="article:modified_time" content="2013-12-18T18:50:12+00:00">
</head>
<body>
<header class=app-header>
<a href=https://www.mseri.me><img class=app-header-avatar src=/images/gauss_logo.png alt="Marcello Seri"></a>
<h1>A fractal spectrum of tales</h1>
<p>Free thoughts of a geeky mathematician</p>
<div class=app-header-social>
<a target=_blank href=https://github.com/mseri rel="noreferrer noopener"><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a>
<a target=_blank href=https://twitter.com/marcelloseri rel="noreferrer noopener"><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a>
<a target=_blank href=https://academic.mseri.me rel="noreferrer noopener"><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-award"><title>award</title><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg></a>
</div>
</header>
<main class=app-container>
<article class=post>
<header class=post-header>
<h1 class=post-title>Again on zsh</h1>
<div class=post-meta>
<div><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Dec 18, 2013
</div>
<div><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
4 min read
</div><div><svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>
<a class=tag href=https://www.mseri.me/tags/prezto/>prezto</a></div></div>
</header>
<div class=post-content>
<p>I already wrote about the great pleasure of moving to zsh in a previous post, but I feel that I should update you on the progresses.</p>
<p>From the last time I moved from Oh-My-Zsh to <a href=https://github.com/sorin-ionescu/prezto>Prezto</a>, a different <a href=https://dotfiles.github.io><em>dotfiles framework</em></a>. I&rsquo;ve found it much lighter and faster than oh-my-zsh, despite not having the same amount of plugins and themes.</p>
<p>In fact, as far as I understood, prezto was born as a fork of oh-my-zsh and was later completely rewritten to be more zshish and better optimised.</p>
<p>I must say that it cover all the plugins that I need and it feels sensibly faster and nicer on OSX and on the Raspberry Pi.</p>
<p>The setup requires three steps instead of just one but it&rsquo;s worth doing it.</p>
<p>If you already use zsh I suggest you to make a backup copy of your configuration. It&rsquo;s enough to do the following from a terminal:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>    $ cd ~
    $ tar czf zshBackup.tar.gz .z* .oh-my-zsh
</code></pre></div><p>(remove <code>.oh-my-zsh</code> from the line if you have not installed it)</p>
<p>Then go to the <a href=https://github.com/sorin-ionescu/prezto>Prezto GitHub page</a> and follow the instructions there.</p>
<p>To avoid too many jumps I am copying them here:</p>
<ol start=0>
<li>
<p>Clean your previous Zsh configuration (<strong>create a Backup copy of the files before proceeding!!!</strong>)</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>    rm -r .z* .oh-my-zsh

</code></pre></div></li>
</ol>
<pre tabindex=0><code class=language-1. data-lang=1.>
    ```sh
        zsh
</code></pre><ol start=2>
<li>
<p>Clone the repository:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>    git clone --recursive https://github.com/sorin-ionescu/prezto.git <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>ZDOTDIR<span style=color:#66d9ef>:-</span>$HOME<span style=color:#e6db74>}</span><span style=color:#e6db74>/.zprezto&#34;</span>
</code></pre></div></li>
</ol>
<pre tabindex=0><code>3. Create a new Zsh configuration by copying the Zsh configuration files provided:

    ```sh
        setopt EXTENDED_GLOB
        for rcfile in &quot;${ZDOTDIR:-$HOME}&quot;/.zprezto/runcoms/^README.md(.N)
        do
            ln -s &quot;$rcfile&quot; &quot;${ZDOTDIR:-$HOME}/.${rcfile:t}&quot;
        done
</code></pre><ol start=4>
<li>
<p>Set Zsh as your default shell (if it is not):</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>    chsh -s /bin/zsh
</code></pre></div></li>
</ol>
<pre tabindex=0><code>5. Open a new Zsh terminal window or tab.

At this point you can happily see your new zsh theme.
Prezto comes with many available plugins, I suggest you to look at the [Modules page on Prezto's GitHub](https://github.com/sorin-ionescu/prezto/tree/master/modules#modules) or at the `README` file in `.zprezto/modules`.

To enable the modules is enough to open `.zpreztorc` with your favourite editor and look for a block that looks like:

    # Set the Prezto modules to load (browse modules).
    # The order matters.
    zstyle ':prezto:load' pmodule \
      'environment' \
      'terminal' \
      'editor' \
      'history' \
      'directory' \
      'spectrum' \
      'utility' \
      'git' \
      'archive' \
      'homebrew' \
      'osx' \
      'ssh' \
      'completion' \
      'prompt'

Walking through the file you may enable/disable/setup a lot of behaviours and functionalities, have a look at it.

In particular I wanted back my custom theme... To enable and customise themes is a bit tricky (but not too much).

I mimicked what they did in [YADR](https://github.com/skwp/dotfiles) (another very interesting dotfiles repository for zsh, vim, sublime text and iterm) and built mine.

1. First of all you need to create a new folder
      
    ```sh
        $ mkdir ~/.zsh.prompts
</code></pre><pre><code>where you are going to save your theme.
</code></pre>
<ol start=2>
<li>
<p>Modify the <code>Prompt</code> section of <code>.zpreztorc</code> to look like</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>    <span style=color:#75715e># Set the prompt theme to load.</span>
    <span style=color:#75715e># Setting it to &#39;random&#39; loads a random theme.</span>
    <span style=color:#75715e># Auto set to &#39;off&#39; on dumb terminals.</span>
    <span style=color:#75715e># zstyle &#39;:prezto:module:prompt&#39; theme &#39;sorin&#39;</span>
    autoload promptinit
    fpath<span style=color:#f92672>=(</span>$HOME/.zsh.prompts $fpath<span style=color:#f92672>)</span>
    promptinit
</code></pre></div></li>
</ol>
<pre tabindex=0><code>        zstyle ':prezto:module:prompt' theme 'YOURTHEMENAME'

    where `YOURTHEMENAME` is the name that you have chosen for your theme.
 
3. Create your theme file in `.zsh.prompts`. Note that its name must be `prompt_YOURTHEMENAME_setup`, otherwise it will not be recognised.
 
  I have no real advice on the creation of a theme. I posted [my theme on gist](https://gist.github.com/mseri/8026965) if you want to try it or you want to use it as a starting point. It is a slightly modified version of YADR's steeef simplified theme.

You may find the function provided in [oh-my-zsh's spectrum file](https://github.com/robbyrussell/oh-my-zsh/blob/master/lib/spectrum.zsh) helpful. For example it is enough to type the following in your Zsh terminal to see all the colours available

```sh
    for code in {000..255}; do
        print -P -- &quot;$code: %F{$code}Test%f&quot;
    done
</code></pre><p>Or, for something similar, have fun and try</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>    <span style=color:#66d9ef>for</span> code in <span style=color:#f92672>{</span>000..255<span style=color:#f92672>}</span>; <span style=color:#66d9ef>do</span>
        <span style=color:#f92672>((</span>cc <span style=color:#f92672>=</span> code + 1<span style=color:#f92672>))</span>
        print -P -- <span style=color:#e6db74>&#34;</span>$BG<span style=color:#e6db74>[</span>$code<span style=color:#e6db74>]</span>$code<span style=color:#e6db74>: Test %{</span>$reset_color<span style=color:#e6db74>%}&#34;</span>
    <span style=color:#66d9ef>done</span>
</code></pre></div><p>Have fun. Thanks to zsh and <a href=https://www.iterm2.com/#/section/home>iTerm2</a> I am happily going back to use <a href=https://www.vim.org>vim</a> but that&rsquo;s another story&mldr;</p>
</div>
<div class=post-footer>
</div>
</article>
</main>
</body>
</html>